<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="/assets/css/style.css?v=">
  <!--  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> -->
  <script type="text/javascript" src="/assets/js/script.js"></script>

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Ari’s page | C coder learing golang. C C++ python to golang.</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="Ari’s page" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="C coder learing golang. C C++ python to golang." />
<meta property="og:description" content="C coder learing golang. C C++ python to golang." />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Ari’s page" />
<script type="application/ld+json">
{"url":"http://localhost:4000/","description":"C coder learing golang. C C++ python to golang.","name":"Ari’s page","@type":"WebSite","headline":"Ari’s page","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="description" content="C coder learing golang. C C++ python to golang.">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Ari's page</h1>
    </header>
    <div id="container">
      <p class="tagline">C coder learing golang. C C++ python to golang.</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          
          <a href="" class="download-button tar"><span>Download</span></a>
          <a href="" class="download-button zip"><span>Download</span></a>
          
          <a href="" class="code">View Ari's page on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <head>


    <!-- jQuery -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


</head>

<p><strong>intro</strong></p>

<p>So I needed to learn golang.. I tought I’ll share my experiences.</p>

<p>Of course I made some assosations in my mind with C/C++/python. I know golang tutorials let you know that you should not make such assumptions.. but I could not help my self but to make them anyway.</p>

<p>So here is what I learned this far :</p>

<h1 id="-standalone-binaryexecutable"><a href="#header-1"></a> standalone binary/executable</h1>

<p>The thing why I really like golang (so far) is that it makes standalone executable.</p>

<p>Of course this means that everything is staticly linked to the executable/binary and the size grows compared e.g C.. but compared to benefit of having executable standalone, I could not care less.</p>

<p>No different path settings/exports/registry entries, install programs etc.. just run or compile+run the binary ;)</p>

<p>have you ever seen python or ruby script to fail due imported library incombability ;)</p>

<p>And so far what I have tried, the same code compiles to windows and runs the same way.. standalone. (You can even copile it at linux for windows).</p>

<h1 id="-first-look"><a href="#header-1"></a> first look</h1>
<p>e.g edited https://tour.golang.org/basics/4</p>
<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">x</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">y</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">a</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"hello"</span><span class="x">
	</span><span class="n">b</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">123456</span><span class="x">

	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="m">42</span><span class="p">,</span><span class="x"> </span><span class="m">13</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>nothing too complicated.. they(=golang developers) just switched variable first and type after that.</p>

<p>variable type fixed to the type of initialized… fine.
Return value is at the end of function defination.. makes sence.</p>

<p>You need brackes if you have more than one return value (btw really nice feature).</p>

<p>I think it is stated somewhere but I missed first that if function name starts with CAPITAL e.f Foo() it is public when in package.</p>

<h1 id="-funtions"><a href="#header-1"></a> funtions</h1>

<p>Basic function is simple as above.
But then there is sometimes stuff just after the ‘func’ keyword, tutorials somehow seem to skip this .. I leared this by googling the very similar question.</p>

<p>But then function can be also ‘class/struct’ function.</p>

<p>That is the stuff in brackets after ‘func’ is like automaticly made class/struct instance.. and used like this-pointer in C++.</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">zoo</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="n">i</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">y</span><span class="x"> </span><span class="n">zoo</span><span class="p">)</span><span class="x"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">x</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"something %d %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">x</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="o">.</span><span class="n">i</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="n">y</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">zoo</span><span class="p">{}</span><span class="x">
     </span><span class="n">y</span><span class="o">.</span><span class="n">i</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"hello"</span><span class="x"> 
     </span><span class="n">y</span><span class="o">.</span><span class="n">Foo</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>output of this is : 
something 5 hello</p>

<h1 id="-go-routines"><a href="#header-1"></a> go routines</h1>

<p>I think them as threads, fork etc.</p>

<p>Here main() waits for childs to exit and first foo() finnishes last.</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"time"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">foo</span><span class="p">(</span><span class="n">id</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">sleepTime</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">100</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="x">
	</span><span class="n">sleepTime</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">sleepTime</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="x">

	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"%d: hello from go func, sleep %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">id</span><span class="p">,</span><span class="x"> </span><span class="n">sleepTime</span><span class="p">)</span><span class="x">
	</span><span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">sleepTime</span><span class="p">)</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"%d: exit go func</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">id</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">threadId</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">3</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"hello from main</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span><span class="x">
	</span><span class="k">go</span><span class="x"> </span><span class="n">foo</span><span class="p">(</span><span class="n">threadId</span><span class="p">)</span><span class="x">
	</span><span class="n">threadId</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="x">
	</span><span class="k">go</span><span class="x"> </span><span class="n">foo</span><span class="p">(</span><span class="n">threadId</span><span class="p">)</span><span class="x">
	</span><span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">500</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>For some really good reason there ++really is no++ official api/function to get the go routine id (thread id).
So I just use some id for now. I did try to use uuid but those make log line too long.</p>

<p>Perhaps in future I’ll use the ‘context’ stuff they included quite resently.
I also heard that golang has inbuilt thread/go routine/function engine.. so you should be able to run more than real threads.. never needed that much yet.</p>

<h1 id="-struct"><a href="#header-1"></a> struct</h1>

<p>struct is like class in C++.</p>

<h1 id="-packages"><a href="#header-1"></a> packages</h1>

<p>package imports are like the one’s in python, and acts like class in C++.
Each package file can even have init() function.. like class constructor in C++.</p>

<p>As I wrote earlier funtion names with starting capitals are public with small letter private to the file (or in C++ to the class).</p>

<p>This does not only apply to the functions but also to the e.g constans, structs etc.</p>

<p>Again nothing really compilated.</p>

<p>in file src/my_utils.go</p>
<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">x</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"foo %d"</span><span class="p">,</span><span class="x"> </span><span class="n">x</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>so in my_prog.go I can call it.</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="n">my_utils</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Foo</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>

<h1 id="-imported-packages"><a href="#header-2"></a> imported packages</h1>

<p>Public funtions you can overwrite, like virtual function in C++.
Now the real mess starts when you include/import some package that uses private structs and/or constants.</p>

<p>in file my_utils.go, I added private my_server</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">my_utils</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">my_server</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="n">bar</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">x</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="x"> </span><span class="n">my_server</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"foo %d, %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">x</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>

<p>At main I try to use it.</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"my_utils"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="k">var</span><span class="x"> </span><span class="n">y</span><span class="x"> </span><span class="n">my_utils</span><span class="o">.</span><span class="n">my_server</span><span class="x">
     </span><span class="n">y</span><span class="o">.</span><span class="n">bar</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"not bar"</span><span class="x">
     </span><span class="n">my_utils</span><span class="o">.</span><span class="n">Foo</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>

<p>Because my_server is private I can not use public funtion Foo().
I can not even access/set the bar variable if I change the my_server to public My_server !!
Same apply if the private is the this-pointer instance I mentioned at function paragraph.</p>

<p>In C++ you could inherit the whole class (my_utils), and then overwrite the Foo().</p>

<p>As far I know ,you can not do this in golang with out tricks ;(</p>

<h2 id="-some-whining-about-this-issue"><a href="#header-3"></a> some whining about this issue</h2>

<p>“They are privat for a reason”.. bollocks, my personal quess is that I would do it.. because as said in C++ you can just inherit and do what ever you want with members.</p>

<p>Yeah, I know this is what the golang interface stuff is for but you see this all the time.. and end up ripping others code.</p>

<p>A lot of code/project what I have seen are not writen to be extended or used anywhere else than specific case, even the projects intention was to create interface !</p>

<p>In general I have started to be little sceptical of projects started 2/3 years ago.. A lot of them seem to be playing with golang and just dumped to github.
I hope standard library has sceptical members what to put there or were are in the mess as some many other languages.</p>

<p>So I learned <strong>my lesson</strong>, I have to think what members really need be private or use interface in an github project. 
If I think it is any use to anybody other than just cut and paste code.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The end so far.
</code></pre></div></div>

<p><a href="http://hits.dwyl.io/apmattil/apmattil.github.io"><img src="http://hits.dwyl.io/apmattil/apmattil.github.io.svg" alt="HitCount" /></a></p>

<div class="clearfix"></div>
<p><br /></p>
<div id="comments">
<div class="post-header bg-">
  <h1 class="h1 post-title">Comments</h1>
</div>

<article class="post-content">
<p>Want to leave a comment? Visit <a href="https://github.com/apmattil/apmattil.github.io/issues/1"> this post's issue page on GitHub</a> (you'll need a GitHub account).</p>
</article>
</div>

<script type="text/javascript">
  function loadComments(data) {
    for (var i=0; i<data.length; i++) {
      var cuser = data[i].user.login;
      var cuserlink = data[i].user.html_url;
      var clink = data[i].html_url;
      var cbody = data[i].body_html;
      var cavatarlink = data[i].user.avatar_url;      
      var cdate = new Date(data[i].created_at);
      var dopts = { month: 'short', day: 'numeric', year: 'numeric' }
      $("#comments").append('<br><div class="post-header bg-"><span class="post-meta">' + cdate.toLocaleDateString("en", dopts) + '</span><br><a class="post-link" href="' + cuserlink + '"><h3 class="h3 post-title">' + cuser + '</h3></a></div><article class="post-content">' + cbody + '</article>');
    }
  }
  $.ajax("https://api.github.com/repos/apmattil/apmattil.github.io/issues/1/comments", {
    headers: {Accept: "application/vnd.github.v3.html+json"},
    dataType: "json",
    success: function(msg){
      loadComments(msg);
   }
  });
</script>


        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      

       

      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="" class="tar">tar</a><a href="" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
